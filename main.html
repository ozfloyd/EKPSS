<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport"    content="width=device-width">
    <meta name="theme-color" content="#7fa" />
    <meta name="author"      content="M A Eyler, Istanbul, 2020" />
    <meta name="description" content="EKPSS" />
    <link rel="stylesheet" href="main.css" media="all">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="image/icon.png">
    <link rel="apple-touch-icon" href="image/icon.png">
    <title>EKPSS</title>
  </head>
  
  <body>
<div id=main class=section>
  <h2>EKPSS Örnek Sınavlar</h2>

  <h3>Türkçe</h3>       <ul id=TR></ul>
  <h3>Matematik</h3>    <ul id=MA></ul>
  <h3>Genel Yetenek</h3><ul id=GY></ul>
  <h3>Genel Kültür</h3> <ul id=GK></ul>
  <h3>Deneme</h3>       <ul id=DE></ul>

  <p>&nbsp;</p>

  <!-- <select id=menu autofocus>
    <option selected disabled>_Sınav seçin_</option>
    <option>DE Kısa sınav</option>
    <option>DE Farklı soru</option>
  </select> -->

  <pre id=out></pre>
  <input id=clear type=button value='Cevapları sil'>
  <button id=add2hs>+</button>
</div>

<div id=quiz class=section hidden>
  <div id=score></div>
  <h2 id=title></h2>
  <p id=question></p>
  <ul id=items>
    <li id=a0 class=choice></li>
    <li id=a1 class=choice></li>
    <li id=a2 class=choice></li>
    <li id=a3 class=choice></li>
    <li id=a4 class=choice></li>
  </ul>
  <p id=result></p>
  <p id=control>
    <button id=leftB>◁</button>
    <button id=answer>?</button>
    <button id=rightB>▷</button>
  </p>
  <!-- <pre id=out2></pre> -->
</div>

<script src="main.js"></script>
<script>  //code related to PWA remains on this file
    if (navigator.serviceWorker) {
        navigator.serviceWorker.register('sw.js')
        .then(reg => { console.log('Service worker', reg.scope) })
        .catch(alert)
    }

// from  https://love2dev.com/blog/beforeinstallprompt/
var pevt  //BeforeInstallPromptEvent
window.onbeforeinstallprompt = beforeinstallCB
function beforeinstallCB(e) {
    // Prevent Chrome 67 from showing the prompt 
    e.preventDefault(); pevt = e
    //let add2hs = document.querySelector("#add2hs")
    add2hs.style.display = "block"
    add2hs.onclick = addToHomeScreen
}
function addToHomeScreen() {
    //let add2hs = document.querySelector("#add2hs")
    add2hs.style.display = 'none'; pevt.prompt()
    // Wait for the user to respond to the prompt 
    pevt.userChoice.then(console.log); pevt = null
}
</script>
    
  </body>
</html>
